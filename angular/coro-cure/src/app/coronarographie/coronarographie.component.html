<div class="container-fluid">
  <div class="row justify-content-md-center">
    <div class="col-10">
      <div class="card coro-container-dark" style="padding: 30px;">
        <ul class="nav nav-pills" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="coronarographie-tab" data-toggle="tab" href="#coronarographie" role="tab"
              aria-controls="coronarographie" aria-selected="true">Coronarographie</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="facteurs-tab" data-toggle="tab" href="#facteurs" role="tab" aria-controls="facteurs"
              aria-selected="false">Facteurs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="contraste-dosimetrie-tab" data-toggle="tab" href="#contraste-dosimetrie" role="tab"
              aria-controls="contraste-dosimetrie" aria-selected="false">Contraste et dosimétrie</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="biologie-tab" data-toggle="tab" href="#biologie" role="tab" aria-controls="biologie"
              aria-selected="false">Biologie</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="lesion-tab" data-toggle="tab" href="#lesion" role="tab" aria-controls="lesion"
              aria-selected="false">Lésions</a>
          </li>
        </ul>
        <div class="tab-content" style="margin-top: 40px;">
          <!-- Main -->
          <div class="tab-pane fade show active" id="coronarographie" role="tabpanel"
            aria-labelledby="coronarographie-tab">
            <form class="interv-form">
              <h5 class="mb-3" style="color: rgb(70, 70, 70); font-weight: 500;">Coronarographie :</h5>
              <hr>

              <div class="form-group">
                <label for="numero">Numéro*:</label>
                <input type="text" id="numero" [(ngModel)]="coronarographie.Numero" name="numero" class="form-control rounded-pill form-control-sm" required>
              </div>

              <div class="form-check">
                <input id="estUrgente" name="estUrgente" class="form-check-input" type="checkbox" [(ngModel)]="coronarographie.estUrgente" required>
                <label class="form-check-label" for="estUrgente">Urgente*</label>
              </div>

             <br>

              <div class="form-group">
                <label for="date">Date*:</label>
                <input type="date" id="date" name="date" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Date" required>
              </div>

              <div class="form-group">
                <label for="numDossier">Numero Dossier*:</label>
                <select name="numDossier" id="numDossier" class="form-control" [(ngModel)]="coronarographie.PatientId">
                  <option disabled selected value> -- select -- </option>
                  <option *ngFor="let patient of patients" [value]="patient.id">{{patient.id}} - {{patient.nom}} {{patient.prenom}}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="cardiologue">Opérateur:</label>
                <select name="cardiologue" id="cardiologue" class="form-control" [(ngModel)]="coronarographie.Cardiologue.CIN">
                  <option disabled selected value> -- select -- </option>
                  <option *ngFor="let cardiologue of cardiologues" [value]="cardiologue.cin">{{cardiologue.nom}} {{cardiologue.prenom}}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="voie">Voie d'abord:</label>
                <input type="text" id="voie" name="voie" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Voie">
              </div>

              <div class="form-group">
                <label for="statut">Statut Coronaire:</label>
                <select name="statut" id="statut" class="form-control" [(ngModel)]="coronarographie.Statut">
                  <option disabled selected value> -- select -- </option>
                  <option value="mono">Mono</option>
                  <option value="bi">Bi</option>
                  <option value="tri">Tri</option>
                </select>
              </div>
              <div class="form-group">
                <label for="motif">Motif principal:</label>
                <select name="motif" id="motif" class="form-control" [(ngModel)]="coronarographie.MotifPrinc">
                  <option disabled selected value> -- select -- </option>
                  <option value="SCA ST+">SCA ST+</option>
                  <option value="SCA ST- Tropo+">SCA ST- Tropo+</option>
                  <option value="SCA ST- Tropo -">SCA ST- Tropo -</option>
                  <option value="Maladie Coronaire Stable">Maladie Coronaire Stable</option>
                </select>
              </div>
              <div class="form-group">
                <label for="autreMotif">Autre motif:</label>
                <input type="text" id="autreMotif" name="autreMotif" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.AutreMotif">
              </div>
              <div class="form-group">
                <label for="fevg">FeVG:</label>
                <input type="range" id="send" name="fevg" oninput="result.value=send.value"
                  class="form-control rounded-pill form-control-sm">
                <input type="text" id="result" name="fevg" class="form-control rounded-pill form-control-sm">
              </div>
            </form>
          </div>

          <!-- Facteurs -->
          <div class="tab-pane fade" id="facteurs" role="tabpanel" aria-labelledby="facteurs-tab">
            <form class="interv-form">
              <h5 class="mb-3" style="color: rgb(70, 70, 70); font-weight: 500;">Facteurs :</h5>
              <hr>
              <div class="row">
                <div class="col-3" style="min-width: 225px;">
                  <div class="form-group">
                    <label for="taille">Taille (m):</label>
                    <input type="number" id="taille" name="taille" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.Taille">
                  </div>
                  <div class="form-group">
                    <label for="poids">Poids (kg):</label>
                    <input type="number" id="poids" name="poids" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.Poids">
                  </div>
                  <div class="form-group">
                    <label for="imc">IMC:</label>
                    <input type="text" id="imc" name="imc" class="form-control rounded-pill form-control-sm" [value]="imc" readonly>
                  </div>
                  <div class="form-group">
                    <label for="obesite">Obesité:</label>
                    <input type="text" id="obesite" name="obesite" class="form-control rounded-pill form-control-sm" [value]="obesite" readonly>
                  </div>

                  <div class="form-group">
                    <label for="typeDiabete">Type Diabète:</label>
                    <select name="typeDiabete" id="typeDiabete" class="form-control" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.TypeDiabete">
                      <option disabled selected value> -- select -- </option>
                      <option value="did">DID</option>
                      <option value="dnid">DNID</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="motif">Ancienete Diabète:</label>
                    <input type="text" id="motif" name="motif" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.AncDiabete">
                  </div>
                </div>

                <div class="col-3" style="padding-left:50px; min-width: 250px;">
                  <div class="form-check">
                    <input id="hta" class="form-check-input" type="checkbox" name="hta" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.HTA">
                    <label class="form-check-label" for="hta"> HTA </label>
                  </div>

                  <div class="form-check">
                    <input id="diabete" class="form-check-input" type="checkbox" name="diabete" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.Diabete">
                    <label class="form-check-label" for="diabete">Diabetes</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="tabac" id="tabac" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.Tabac">
                    <label class="form-check-label" for="non">Tabac:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="dysplidemie" id="dysplidemie" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.Dysplidemie">
                    <label class="form-check-label" for="dysplidemie">Dysplidémie:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="ait" id="ait" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.AIT">
                    <label class="form-check-label" for="ait">AIT</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="avcIschemique" id="avcIschemique" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.AVCIsh">
                    <label class="form-check-label" for="avcIschemique">AVC ischémique:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="avcHemorragique" id="avcHemorragique" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.AVCHem">
                    <label class="form-check-label" for="avcHemorragique">AVC hémorragique:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="atcdIdm" id="atcdIdm" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.ATCDIDM">
                    <label class="form-check-label" for="atcdIdm">ATCD IDM:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="atcdAtl" id="atcdAtl" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.ATCDATL">
                    <label class="form-check-label" for="atcdAtl">ATCD ATL:</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="atcdPac" id="atcdPac" [(ngModel)]="coronarographie.FacteursRisqueAntecedants.ATCDPAC">
                    <label class="form-check-label" for="atcdPac">ATCD PAC:</label>
                  </div>

                </div>
              </div>
            </form>
          </div>

          <!-- Contraste -->
          <div class="tab-pane fade" id="contraste-dosimetrie" role="tabpanel" aria-labelledby="contraste-dosimetrie-tab">
            <form class="interv-form">
              <h5 class="mb-3" style="color: rgb(70, 70, 70); font-weight: 500;">Contraste et dosimétrie:</h5>
              <hr>

              <div class="form-group">
                <label for="typePdc">Type PDC:</label>
                <input type="text" id="typePdc" name="typePdc" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.ContrasteDosimetrie.TypePDC">
              </div>

              <div class="form-group">
                <label for="quantitePdc">Quantité PDC:</label>
                <input type="number" id="quantitePdc" name="quantitePdc" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.ContrasteDosimetrie.QtePDC">
              </div>

              <div class="form-group">
                <label for="quantitePds">Quantité PDS:</label>
                <input type="number" id="quantitePds" name="quantitePds" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.ContrasteDosimetrie.QtePDS">
              </div>

              <div class="form-group">
                <label for="nombreImg">Nombre d'images:</label>
                <input type="number" id="nombreImg" name="nombreImg" class="form-control rounded-pill form-control-sm" min="1" max="100" [(ngModel)]="coronarographie.ContrasteDosimetrie.NombreImages">
              </div>
            </form>
          </div>

          <!-- Biologie -->
          <div class="tab-pane fade" id="biologie" role="tabpanel" aria-labelledby="biologie-tab">
            <form class="interv-form">
              <h5 class="mb-3" style="color: rgb(70, 70, 70); font-weight: 500;">Biologie:</h5>
              <hr>

              <div class="form-group">
                <label for="creatinine">Créatinine:</label>
                <input type="number" id="creatinine" name="creatinine" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Biologie.Creatinine">
              </div>

              <div class="form-group">
                <label for="clCreatinine">CL créatinine (ml/min):</label>
                <input type="text" id="clCreatinine" name="clCreatinine" [value]="clCreatinine" class="form-control rounded-pill form-control-sm" readonly>
              </div>

              <div class="form-group">
                <label for="irc">IRC:</label>
                <input type="number" min="0" max="100" id="irc" name="irc" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Biologie.IRC">
              </div>

              <div class="form-group">
                <label for="hemoglobine">Hemoglobine (gr/dl):</label>
                <input type="number" id="hemoglobine" name="hemoglobine" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Biologie.Hemoglobine" >
              </div>

              <div class="form-group">
                <label for="inr">INR:</label>
                <input type="text" id="inr" name="inr" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Biologie.INR">
              </div>

              <div class="form-group">
                <label for="picTroponine">Pic de troponine (us):</label>
                <input type="text" id="picTroponine" name="picTroponine" class="form-control rounded-pill form-control-sm" [(ngModel)]="coronarographie.Biologie.PicTroponine">
              </div>
            </form>
          </div>

          <!-- Lesion -->
          <div class="tab-pane fade" id="lesion" role="tabpanel" aria-labelledby="lesion-tab">
            <div class="row">
              <div class="col-4">
                <div class="card">
                  <img class="card-img-top" [src]="schemaUrl" alt="Card image cap" style="width: 350px">
                  <div class="card-body">
                    <h5 class="card-title">Ajouter une nouvelle lesion</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                      card's content.</p>
                    <form>
                      <div class="form-group">
                        <label for="type-lesion">Type :</label>
                        <input type="text" id="type-lesion" name="type-lesion" [(ngModel)]="lesion.TypeLesion" class="form-control rounded-pill form-control-sm" required>
                      </div>
                      <div class="form-group">
                        <label for="degree-lesion">Degrée :</label>
                        <input type="text" id="degree-lesion" name="degree-lesion" [(ngModel)]="lesion.Degre"
                          class="form-control rounded-pill form-control-sm" required>
                      </div>
                      <div class="form-group">
                        <label for="flux-timi-lesion">Flux TIMI :</label>
                        <input type="text" id="flux-lesion" name="flux-lesion" [(ngModel)]="lesion.FluxTIMI"
                          class="form-control rounded-pill form-control-sm" required>
                      </div>
                      <div class="form-group">
                        <label for="segment-lesion">Segment :</label>
                        <select id="segment-lesion" name="segment-lesion" class="form-control rounded-pill form-control-sm" [(ngModel)]="lesion.Description.Segment" required>
                          <option>1 - RCA proximal</option>
                          <option>2 - RCA mid</option>
                          <option>3 - RCA distal</option>
                          <option>5 - Left Main</option>
                          <option>6 - LAD proximal</option>
                          <option>7 - LAD mid</option>
                          <option>8 -LAD apical</option>
                          <option>9 - First diagonal</option>
                          <option>9a - Add. first diagonal</option>
                          <option>10 - second diagonal</option>
                          <option>10a - Add. second diagonal</option>
                          <option>11 - Proximal circumflex</option>
                          <option>12 - Intermediate/anterolateral</option>
                          <option>12a - Obtuse marginal</option>
                          <option>12b - Obtuse marginal</option>
                          <option>13 - Distal circumflex</option>
                          <option>14 - Left posterolateral</option>
                          <option>14a - Left posterolateral</option>
                          <option>14b - Left posterolateral</option>
                          <option>15 - Posterior descending</option>
                        </select>
                      </div>
                    </form>
                    <a (click)="addLesion()" class="btn btn-primary">Ajouter lesion</a>
                  </div>
                </div>
              </div>
              <div class="col">
                <table class="table table-striped table-hover">
                  <thead class="thead thead-dark">
                    <th scope="col">Type</th>
                    <th scope="col">Degré</th>
                    <th scope="col">Flux TIMI</th>
                    <th scope="col">Segment</th>
                  </thead>
                  <tbody>
                    <tr *ngFor="let lesion of coronarographie.Lesions">
                      <td>{{lesion.TypeLesion}}</td>
                      <td>{{lesion.Degre}}</td>
                      <td>{{lesion.FluxTIMI}}</td>
                      <td>{{lesion.Description.Segment}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- <div class="grid-table table table-striped table-hover">
              <div class="thead thead-dark">
                <div class="tr">
                  <th scope="col">Type</th>
                  <th scope="col">Degré</th>
                  <th scope="col">Flux TIMI</th>
                  <th scope="col">Segment</th>
                  <th scope="col"></th>
                </div>
              </div>
              <div class="tbody">
                <form class="tr" [formGroup]="formGroupLesion" *ngFor="let formGroupLesion of lesionForms.controls">
                  <div class="td"><input class="form-control" formControlName="type"></div>
                  <div class="td"><input class="form-control" formControlName="degre"></div>
                  <div class="td"><input class="form-control" formControlName="fluxTIMI"></div>
                  <div class="td"><input class="form-control" formControlName="descriptionSegment"></div>
                </form>
              </div>
            </div> -->

            <!-- <div class="card"
              style="margin-left: 10px; text-align: center; max-height: 150px; padding: 20px;  max-width: 300px;">
              <h5 class="mb-3" style="color: rgb(70, 70, 70); font-weight: 500;">Description:</h5>
              <hr>
              <button class="btn btn-custom rounded-pill" type="submit" style="font-size: 15px;" data-toggle="modal"
                data-target="#descriptionModal">
                Schéma
              </button>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--btn-->
  <div class="row">
    <div style="text-align: center; margin-top: 25px; margin-bottom: 25px; padding: 50px;">
      <button type="submit" class="btn btn-custom" (click)="addCoronarographie()">Enregistrer</button>
      <button type="submit" class="btn btn-custom">Réinitialiser</button>
    </div>
  </div>
</div>

<!--modal-->
<div class="modal fade" id="descriptionModal" tabindex="-1" role="dialog" aria-labelledby="descriptionModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Description</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <div class="row">
            <div id="schema">
              <img [src]='schemaUrl' style="width: 450px;">
            </div>
            <div id="segment">
              <div style="margin-left: 10px; min-width: 500px;">
                <div class="card">
                  <div class="card-body">
                    <table class="table table-striped table-hover">
                      <thead class="thead-dark">
                        <tr>
                          <th scope="col"></th>
                          <th scope="col">Segment</th>
                          <th scope="col"></th>
                          <th scope="col"></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>RCA</td>
                          <td>RCA proximal</td>
                          <td>1</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>RCA mid</td>
                          <td>2</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>RCA distal</td>
                          <td>3</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td>LM</td>
                          <td>Left Main</td>
                          <td>5</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td>LAD</td>
                          <td>LAD proximal</td>
                          <td>6</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>LAD mid</td>
                          <td>7</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>LAD apical</td>
                          <td>8</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>First diagonal</td>
                          <td>9</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Add. first diagonal</td>
                          <td>9a</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>second diagonal</td>
                          <td>10</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Add. second diagonal</td>
                          <td>10a</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td>LCX</td>
                          <td>Proximal circumflex</td>
                          <td>11</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Intermediate/anterolateral</td>
                          <td>12</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Obtuse marginal</td>
                          <td>12a</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Obtuse marginal</td>
                          <td>12b</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Distal circumflex</td>
                          <td>13</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Left posterolateral</td>
                          <td>14</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Left posterolateral</td>
                          <td>14a</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Left posterolateral</td>
                          <td>14b</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                        <tr>
                          <td></td>
                          <td>Posterior descending</td>
                          <td>15</td>
                          <td><input type="checkbox" name="segment" value=""></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-custom rounded-pill" data-dismiss="modal">Fermer</button>
        <button type="button" class="btn btn-custom rounded-pill">Poursuivre</button>
      </div>
    </div>
  </div>
</div>
